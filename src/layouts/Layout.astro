---
import Header from "@components/Header.astro";
import Footer from "@components/Footer.astro";
import { ViewTransitions } from "astro:transitions";
import Magic from "@components/react/Magic";
import Geo from "@components/react/Geo";
import Title from "@components/Title.astro";
import "atropos/css";
import Bg from "../images/background.webp";
interface Props {
    title: string;
    hidePageTitle?: boolean;
}

const { title, hidePageTitle } = Astro.props;
---

<!doctype html>
<html
    lang="en"
    transition:animate="fade"
    style={`background-image: url(${Bg.src});`}
>
    <head>
        <meta charset="UTF-8" />
        <meta
            name="description"
            content="Carlos Guajardo - Fullstack Developer specializing in web and mobile development. Experienced in React, React Native, Laravel, Next.js, and modern web technologies."
        />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="generator" content={Astro.generator} />
        <meta name="author" content="Carlos Guajardo" />
        <meta
            name="keywords"
            content="Fullstack Developer, Web Development, Mobile Development, React, React Native, Laravel, Next.js, JavaScript, TypeScript"
        />

        <!-- Open Graph / Facebook -->
        <meta property="og:type" content="website" />
        <meta property="og:url" content={Astro.url} />
        <meta property="og:title" content={`${title} - Carlos Guajardo`} />
        <meta
            property="og:description"
            content="Fullstack Developer specializing in web and mobile development"
        />
        <meta
            property="og:image"
            content={new URL("/images/logo.webp", Astro.url)}
        />

        <!-- Twitter -->
        <meta property="twitter:card" content="summary_large_image" />
        <meta property="twitter:url" content={Astro.url} />
        <meta property="twitter:title" content={`${title} - Carlos Guajardo`} />
        <meta
            property="twitter:description"
            content="Fullstack Developer specializing in web and mobile development"
        />
        <meta
            property="twitter:image"
            content={new URL("/images/logo.webp", Astro.url)}
        />

        <link rel="canonical" href={Astro.url} />

        <!-- Preload critical resources -->
        <link rel="preload" href="/css/styles.css" as="style" />
        <link rel="preload" href={Bg.src} as="image" type="image/webp" />
        <link rel="dns-prefetch" href="https://cgcapps-api.vercel.app" />
        <link rel="dns-prefetch" href="https://challenges.cloudflare.com" />

        <title>{title} - Carlos Guajardo | CGCApps</title>
        <ViewTransitions fallback="none" />
        <link rel="stylesheet" href="/css/styles.css" />
    </head>
    <body
        class="dark:bg-indigo-950/60 bg-blend-multiply min-h-screen relative overflow-x-hidden"
    >
        <!-- Skip to main content link for keyboard navigation -->
        <a
            href="#main-content"
            class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-indigo-500 focus:text-white focus:rounded"
        >
            Skip to main content
        </a>
        <Magic client:only />
        <Geo client:only />
        <Header />
        <main
            id="main-content"
            class="mx-auto md:max-w-7xl px-4 pb-2 flex items-center flex-col pt-28 md:pt-32 z-10 overflow-x-hidden mb-12"
        >
            {!hidePageTitle && <Title text={title} />}
            <slot />
        </main>
        <Footer />

        <style is:global>
            html {
                scroll-behavior: smooth;
                font-family: system-ui, sans-serif;
                background-size: 224px;
                background-size: cover;
                background-repeat: no-repeat;
                color-scheme: dark light;
                width: 100vw;
                height: 100vh;
                lang: en;
            }
        </style>
    </body>
</html>
